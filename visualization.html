<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Naive Bayes Visualization</title>
  <link href="primary.css" rel="stylesheet">
  <meta charset="utf-8" />
</head>
<script src="http://d3js.org/d3.v3.min.js" type="text/javascript">
</script>
<body onload="spreadsheet2();">
<p class="title">Naive Bayes Visualization</p>
<div id="controls">
  <div id="buttons" />
</div>
  <footer>
<script>

function spreadsheet2() {
      d3.json("data/zoo-modified.json",function(error,data) {
        expData=data;
        createSpreadsheet(data)
      });

      function createSpreadsheet(incData) {
        var keyValues = d3.keys(incData[0])

        d3.select("#controls")
        .append("div")
        .attr("class", "table")

        d3.select("div.table")
        .append("div")
        .attr("class", "head")
        .selectAll("div.data")
        .data(keyValues)
        .enter()
        .append("div")
        .attr("class", "data")
        .html(function (d) {return d})
        .style("left", function(d,i) {return (i * 86) + "px"});

        d3.select("div.table")
        .selectAll("div.datarow")
        .data(incData, function(d) {return d.animal_name}).enter()
        .append("div")
        .attr("class", "datarow")
        .style("top", function(d,i) {return (40 + (i * 40)) + "px"});

        d3.selectAll("div.datarow")
        .selectAll("div.data")
        .data(function(d) {return d3.entries(d)})
        .enter()
        .append("div")
        .attr("class", "data")
        .html(function (d) {return d.value})
        .style("left", function(d,i,j) {return (i * 86) + "px"});

        d3.select("#controls #buttons").insert("div", ".button").on("click", highlightClasses).html("1");
        d3.select("#controls #buttons").insert("div", ".table").on("click", sortSheet).html("2");
        d3.select("#controls #buttons").insert("div", ".table").on("click", mergeRows).html("3")
        d3.select("#controls #buttons").insert("div", ".table").on("click", generateProbabilities).html("4")
        d3.select("#controls #buttons").insert("div", ".table").on("click", stackedBar).html("5")

        function transitionSheet() {
          d3.selectAll("div.datarow")
            .transition()
            .duration(2000)
            .style("top", function(d,i) {return (40 + (i * 40)) + "px"});
        }

        function sortSheet() {
          var dataset = d3.selectAll("div.datarow").data();

          dataset.sort(function(a,b) {
            return a.class_type > b.class_type;
          });

          d3.selectAll("div.datarow").data(dataset, function(d) {
            return d.animal_name
          })
          .transition()
          .duration(2000)
          .style("top", function(d,i) {return (40 + (i * 40))});
        }

        function highlightClasses() {
          d3.selectAll("div.datarow")
          .selectAll("div.data")
          .each(function (d, i) {
            if(i % 16 === 0){
              if(d.value === 2) {
                d3.select(this).attr("class", "data blue-class");
              } else if(d.value === 4){
                d3.select(this).attr("class", "data orange-class");
              }
            }
          });
        }

        function mergeRows() {

        }

        function generateProbabilities() {

        }

        function stackedBar() {

        }
      }
}

</script>
</footer>
</body>
</html>
